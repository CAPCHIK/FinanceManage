@inject IMediator Mediator

<Title>Список чатов</Title>

<AntList Bordered DataSource="chats" Loading="@(chats == null)">
    <ChildContent Context="item">
        <ListItem NoFlex="true">
            <Row Justify="center" Align="middle">
                <AntDesign.Col>

                    <Title Level="3">@item.ChatName</Title>
                </AntDesign.Col>
                <AntDesign.Col>
                    <FinanceManage.Site.Client.Pages.Purchases.MonthForChatPie ChatId="item.ChatId" />

                </AntDesign.Col>
                <AntDesign.Col>
                    <Space>
                        <SpaceItem>
                            <NavLink href="@($"purchases/{item.ChatId}/edit")">
                                <Button Size="large" Style="display: flex; align-items: center;">
                                    <Icon Type="edit" Theme="outline" />
                                    Редактировать
                                </Button>
                            </NavLink>
                        </SpaceItem>
                        <SpaceItem>
                            <NavLink href="@($"purchases/{item.ChatId}")">
                                <Button Size="large" Style="display: flex; align-items: center;">
                                    <Icon Type="area-chart" Theme="outline" />
                                    Графики
                                </Button>
                            </NavLink>
                        </SpaceItem>
@*
                        <SpaceItem>
                            <NavLink href="@($"weekStatistic/{item.ChatId}?&category=Compact")">
                                <Button Size="large" Style="display: flex; align-items: center;">
                                    <Icon Type="bar-chart" Theme="outline" />
                                    Per Week
                                </Button>
                            </NavLink>
                        </SpaceItem>*@
                    </Space>
                </AntDesign.Col>
            </Row>
        </ListItem>
    </ChildContent>
</AntList>

@code {
    [CascadingParameter]
    private Task<AuthenticationState> authenticationStateTask { get; set; }


    private List<GetChatsListForUser.Response> chats;

    protected async override Task OnParametersSetAsync()
    {
        await base.OnParametersSetAsync();
        var state = await authenticationStateTask;
        chats = await Mediator.Send(new GetChatsListForUser.Command(0));
    }
}